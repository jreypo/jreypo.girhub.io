<!doctype html>
<!--[if lt IE 7]><html class="no-js lt-ie9 lt-ie8 lt-ie7" lang="en"> <![endif]-->
<!--[if (IE 7)&!(IEMobile)]><html class="no-js lt-ie9 lt-ie8" lang="en"><![endif]-->
<!--[if (IE 8)&!(IEMobile)]><html class="no-js lt-ie9" lang="en"><![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en"><!--<![endif]-->
<head>
<meta charset="utf-8">
<title>A first look into VMware Integrated #OpenStack (VIO) &#8211; Juanma's Blog</title>
<meta name="description" content="VMware Integrated
OpenStack, or VIO, was
announced during last year VMworld in San Francisco and has been finally
released today by VMware.

">
<meta name="keywords" content="Cloud, DVS, network virtualization, NSX, NSX for vSphere, OpenStack, SDDC, VIO, VMware, VMware Integrated OpenStack, VSAN, vSphere">

  

<!-- Twitter Cards -->
<meta name="twitter:title" content="A first look into VMware Integrated #OpenStack (VIO)">
<meta name="twitter:description" content="VMware Integrated
OpenStack, or VIO, was
announced during last year VMworld in San Francisco and has been finally
released today by VMware.

">
<meta name="twitter:site" content="@jreypo">


<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="/images/default-thumb.png">

<!-- Open Graph -->
<meta property="og:locale" content="en_US">
<meta property="og:type" content="article">
<meta property="og:title" content="A first look into VMware Integrated #OpenStack (VIO)">
<meta property="og:description" content="VMware Integrated
OpenStack, or VIO, was
announced during last year VMworld in San Francisco and has been finally
released today by VMware.

">
<meta property="og:url" content="/openstack/vmware/a-first-look-into-vmware-integrated-openstack-vio/">
<meta property="og:site_name" content="Juanma's Blog">

<meta property="og:image" content="/images/default-thumb.png">






<link rel="canonical" href="/openstack/vmware/a-first-look-into-vmware-integrated-openstack-vio/">
<link href="/feed.xml" type="application/atom+xml" rel="alternate" title="Juanma's Blog Feed">

<!-- http://t.co/dKP3o1e -->
<meta name="HandheldFriendly" content="True">
<meta name="MobileOptimized" content="320">
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<!-- For all browsers -->
<link rel="stylesheet" href="/assets/css/main.css">

<meta http-equiv="cleartype" content="on">

<!-- HTML5 Shiv and Media Query Support -->
<!--[if lt IE 9]>
	<script src="/assets/js/vendor/html5shiv.min.js"></script>
	<script src="/assets/js/vendor/respond.min.js"></script>
<![endif]-->

<!-- Modernizr -->
<script src="/assets/js/vendor/modernizr-2.7.1.custom.min.js"></script>

<link href='//fonts.googleapis.com/css?family=PT+Sans+Narrow:400,700%7CPT+Serif:400,700,400italic' rel='stylesheet' type='text/css'>

<!-- Icons -->
<!-- 16x16 -->
<link rel="shortcut icon" href="/favicon.ico">
<!-- 32x32 -->
<link rel="shortcut icon" href="/favicon.png">
<!-- 57x57 (precomposed) for iPhone 3GS, pre-2011 iPod Touch and older Android devices -->
<link rel="apple-touch-icon-precomposed" href="/images/apple-touch-icon-precomposed.png">
<!-- 72x72 (precomposed) for 1st generation iPad, iPad 2 and iPad mini -->
<link rel="apple-touch-icon-precomposed" sizes="72x72" href="/images/apple-touch-icon-72x72-precomposed.png">
<!-- 114x114 (precomposed) for iPhone 4, 4S, 5 and post-2011 iPod Touch -->
<link rel="apple-touch-icon-precomposed" sizes="114x114" href="/images/apple-touch-icon-114x114-precomposed.png">
<!-- 144x144 (precomposed) for iPad 3rd and 4th generation -->
<link rel="apple-touch-icon-precomposed" sizes="144x144" href="/images/apple-touch-icon-144x144-precomposed.png">

</head>

<body class="post">

<!--[if lt IE 9]><div class="browser-upgrade alert alert-info">You are using an <strong>outdated</strong> browser. Please <a href="http://browsehappy.com/">upgrade your browser</a> to improve your experience.</div><![endif]-->

<div class="navigation-wrapper">
	<div class="site-name">
		<a href="/">Juanma's Blog</a>
	</div><!-- /.site-name -->
	<div class="top-navigation">
		<nav role="navigation" id="site-nav" class="nav">
		    <ul>
		        
				    
				        
				    
				    <li><a href="/about/" >About</a></li>
				
				    
				        
				    
				    <li><a href="/posts/" >Posts</a></li>
				
				    
				        
				    
				    <li><a href="/vmware-hp-links/" >HP Resources for VMware</a></li>
				
				    
				        
				    
				    <li><a href="/tags/" >Tags</a></li>
				
		    </ul>
		</nav>
	</div><!-- /.top-navigation -->
</div><!-- /.navigation-wrapper -->



<div id="main" role="main">
  <div class="article-author-side">
    
  

<div itemscope itemtype="http://schema.org/Person">


	<img src="/images/" class="bio-photo" alt=" bio photo">


  <h3 itemprop="name"></h3>
  <p></p>
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
</div>

  </div>
  <article class="post">
    <div class="headline-wrap">
      
        <h1><a href="/openstack/vmware/a-first-look-into-vmware-integrated-openstack-vio/" rel="bookmark" title="A first look into VMware Integrated #OpenStack (VIO)">A first look into VMware Integrated #OpenStack (VIO)</a></h1>
      
    </div><!--/ .headline-wrap -->
    <div class="article-wrap">
      <p><strong><a href="http://www.vmware.com/products/openstack">VMware Integrated
OpenStack</a>,</strong> or VIO, was
announced during last year VMworld in San Francisco and has been finally
released today by VMware.</p>

<p>For me this is a very special release because I have been one of the
lucky internal adopters and beta testers of VIO. I have spent many hours
working with several VIO builds and trying to help our incredible
engineering team. This is in my opinion a really solid and well designed
product and will be a game changer in the OpenStack world. Honestly I
cannot be more excited :)</p>

<p><a href="https://jreypo.files.wordpress.com/2015/02/image01.png"><img src="%7B%7B%20site.baseurl%20%7D%7D/assets/image01.png?w=580" alt="IMAGE01" /></a></p>

<p>VIO is basically a VMware supported OpenStack distribution prepared to
run on top of an existing VMware infrastructure. VMware Integrated
OpenStack will empower any VMware Administrator to easily deliver and
operate an Enterprise production grade OpenStack cloud on VMware
components. This means that you will be able at to take advantage of all
VMware vSphere great features like HA, DRS or VSAN for your OpenStack
cloud and also extend and integrate it with other VMware management
components like <a href="http://www.vmware.com/ap/products/vrealize-operations">vRealize
Operations</a> and
<a href="http://www.vmware.com/products/vrealize-log-insight">vRealize Log
Insight</a>.</p>

<h2 id="vio-components">VIO components</h2>

<p>VIO is made by two main building blocks, first the VIO Manager and
second OpenStack components. VIO is packaged as an OVA file that
contains the VIO Manager server and an Ubuntu Linux virtual machine to
be used as the template for the different OpenStack components.</p>

<p>The OpenStack services in VIO are deployed as a distributed highly
available solution formed by the following components:</p>

<ul>
  <li>OpenStack controllers. Two virtual machines running Horizon
Dashboard, Nova (API, scheduler and VNC) services, Keystone, Heat,
Glance, and Cinder services in an active-active cluster.</li>
  <li>Memcached cluster.</li>
  <li>RabbitMQ cluster, for messaging services used by all
OpenStack services.</li>
  <li>Load Balancer virtual machines, an active-active cluster managing
the internal and public virtual IP addresses.</li>
  <li>Nova Compute machine, running the n-cpu service.</li>
  <li>Database cluster. A three node MariaDB Galera cluster that stores
the OpenStack metadata.</li>
  <li>Object Storage machine, running Swift services.</li>
  <li>DHCP nodes. These nodes are only required if NSX is not selected as
provider for Neutron.</li>
</ul>

<h2 id="installation-requirements">Installation requirements</h2>

<p>To be able to successfully deploy VIO you will need at least the
following:</p>

<ul>
  <li>One management cluster with two to three hosts, depending on the
hardware resources of the hosts.</li>
  <li>One Edge cluster. As with any NSX for vSphere deployment it is
recommended to deploy a separate cluster to run all Edge
gateway instances.</li>
  <li>One compute cluster to be used by Nova to run instances. One ESXi
host will be enough but again that will depend on how much resources
are available and what kind of workloads you want to run.</li>
  <li>Management network with at least 15 static IP addresses available.</li>
  <li>External network with a minimum of two IP addresses available. This
is the network where Horizon portal will be exposed and that will be
used by the tenants to access OpenStack APIs and services.</li>
  <li>Data network, only needed if NSX is going to be used. The different
tenant logical network will be created on top of this, the
management network can be used but it is recommended to have a
separate network.</li>
  <li>NSX for vSphere, 6.1.2 at minimum. It has to be setup prior to VIO
deployment if NSX plugin is going to be used with Neutron.</li>
  <li>Distributed Port Group. In case of choosing DVS-based networking a
vSphere port-group tagged with VLAN 4095 must be setup. This port
group will be used as the data network.</li>
</ul>

<p>The hardware requirements are around 56 vCPU, 192GB of memory and 605GB
of storage. To that you have to add NSX for vSphere required resources
for the NSX Manager, the three NSX Controllers and the NSX Edge pool, if
NSX is going to be used.</p>

<p>Anyway in a future post I will review in detail all the pre-requisites
and their setup process for VIO, and the integration between NSX-v and
Neutron.</p>

<h2 id="vio-installation">VIO Installation</h2>

<p>Now that we have seen a bit of VIO I am going to show how to perform an
installation.</p>

<h3 id="deploying-vio-manager">Deploying VIO Manager</h3>

<p>The first step is to deploy VIO OVA on our management cluster. From
vSphere Web Client launch the <em>Deploy OVF Template</em> wizard and enter the
URL to the VIO OVA file.</p>

<p><a href="https://jreypo.files.wordpress.com/2015/02/image02.png"><img src="%7B%7B%20site.baseurl%20%7D%7D/assets/image02.png?w=580" alt="IMAGE02" /></a></p>

<p>Accept the EULA and proceed to configure the template. First as with any
OVA template enter the name and the folder,</p>

<p><a href="https://jreypo.files.wordpress.com/2015/02/image03.png"><img src="%7B%7B%20site.baseurl%20%7D%7D/assets/image03.png?w=580" alt="IMAGE03" /></a></p>

<p>Select the datastore and the storage format.</p>

<p><a href="https://jreypo.files.wordpress.com/2015/02/image04.png"><img src="%7B%7B%20site.baseurl%20%7D%7D/assets/image04.png?w=580" alt="IMAGE04" /></a></p>

<p>Select the network for VIO Manager.</p>

<p><a href="https://jreypo.files.wordpress.com/2015/02/image05.png"><img src="%7B%7B%20site.baseurl%20%7D%7D/assets/image05.png?w=580" alt="IMAGE05" /></a></p>

<p>Now we will customize the template, this includes entering the VIO
Manager server networking settings, NTP, SSO lookup service URL and
Syslog server.</p>

<p><a href="https://jreypo.files.wordpress.com/2015/02/screen-shot-2015-01-31-at-00-32-27.png"><img src="%7B%7B%20site.baseurl%20%7D%7D/assets/screen-shot-2015-01-31-at-00-32-27.png?w=580" alt="Screen Shot 2015-01-31 at
00.32.27" /></a></p>

<p>Go through the next two screens, click finish and start the deployment.
Once it is finished you will have a new vApp with the two virtual
machines. Our next step is to register the management server with
vCenter, power on the OMS vApp and when the management server is fully
started logout of vSphere Web Client. Log in back to vSphere Web Client,
you will notice a new icon in the Home page.</p>

<p><a href="https://jreypo.files.wordpress.com/2015/02/screen-shot-2015-02-01-at-02-34-35.png"><img src="%7B%7B%20site.baseurl%20%7D%7D/assets/screen-shot-2015-02-01-at-02-34-35.png?w=580" alt="Screen Shot 2015-02-01 at
02.34.35" /></a></p>

<p>Access the VIO plugin interface and in the Summary you should see that
VIO Manager has automatically registered itself with vCenter.</p>

<p><a href="https://jreypo.files.wordpress.com/2015/02/image08.png"><img src="%7B%7B%20site.baseurl%20%7D%7D/assets/image08.png?w=580" alt="IMAGE08" /></a></p>

<p>From this screen you can also change the VIO Manager server in case you
need to re-deploy a new one. To do so select the management server in
the pop-up and click OK.</p>

<p><a href="https://jreypo.files.wordpress.com/2015/02/screen-shot-2015-01-31-at-17-24-49.png"><img src="%7B%7B%20site.baseurl%20%7D%7D/assets/screen-shot-2015-01-31-at-17-24-49.png?w=580" alt="Screen Shot 2015-01-31 at
17.24.49" /></a></p>

<p>Accept the SSL certificate to finish the procedure.</p>

<p><a href="https://jreypo.files.wordpress.com/2014/08/screen-shot-2014-08-23-at-01-41-07.png"><img src="%7B%7B%20site.baseurl%20%7D%7D/assets/screen-shot-2014-08-23-at-01-41-07.png?w=580" alt="Screen Shot 2014-08-23 at
01.41.07" /></a></p>

<p>VIO Manager Server will now be displayed as connected in the <em>Summary</em>
tab.</p>

<p><a href="https://jreypo.files.wordpress.com/2015/02/image11.png"><img src="%7B%7B%20site.baseurl%20%7D%7D/assets/image11.png" alt="IMAGE11" /></a></p>

<h3 id="deploying-openstack">Deploying OpenStack</h3>

<p>With VIO Manager running and connected to our vCenter it is time now to
deploy OpenStack. Proceed to the <em>Getting Started</em> tab and click
<strong>Deploy OpenStack</strong><em>.</em></p>

<p><a href="https://jreypo.files.wordpress.com/2015/02/image12.png"><img src="%7B%7B%20site.baseurl%20%7D%7D/assets/image12.png?w=580" alt="IMAGE12" /></a></p>

<p>A new wizard will be launched. In the first screen we must select the
deployment type. VIO allows to deploy a new OpenStack installation or
deploy from a previously saved template file.</p>

<p><a href="https://jreypo.files.wordpress.com/2015/02/image13.png"><img src="%7B%7B%20site.baseurl%20%7D%7D/assets/image13.png?w=580" alt="IMAGE13" /></a></p>

<p>Provide the vCenter administrative credentials.</p>

<p><a href="https://jreypo.files.wordpress.com/2015/02/image14.png"><img src="%7B%7B%20site.baseurl%20%7D%7D/assets/image14.png?w=580" alt="IMAGE14" /></a></p>

<p>Select the management cluster where we are going to deploy VIO.</p>

<p><a href="https://jreypo.files.wordpress.com/2015/02/image15.png"><img src="%7B%7B%20site.baseurl%20%7D%7D/assets/image15.png?w=580" alt="IMAGE15" /></a></p>

<p>Next you need to configure the Management and External networks. Select
the appropriate vSphere port-groups for each network and fill in the
network ranges, gateway, netmask and DNS server fields.</p>

<p><a href="https://jreypo.files.wordpress.com/2015/02/image16.png"><img src="%7B%7B%20site.baseurl%20%7D%7D/assets/image16.png?w=580" alt="IMAGE16" /></a></p>

<p>Enter the values for the load balancer configuration:</p>

<ul>
  <li>Public Virtual IP address</li>
  <li>Public Hostname, this hostname must resolve to the Public
IP address.</li>
</ul>

<p><a href="https://jreypo.files.wordpress.com/2015/02/image17.png"><img src="%7B%7B%20site.baseurl%20%7D%7D/assets/image17.png?w=580" alt="IMAGE17" /></a></p>

<p>Add a cluster to be used for Nova.</p>

<p><a href="https://jreypo.files.wordpress.com/2015/02/image18.png"><img src="%7B%7B%20site.baseurl%20%7D%7D/assets/image18.png?w=580" alt="IMAGE18" /></a></p>

<p>Add the datastores to be used by Nova to store the different instances.
If you have a <a href="http://www.vmware.com/products/virtual-san">VSAN</a>
datastore keep in mind that to be able to use it with Nova the images
stored in Glance have to be
<a href="https://blueprints.launchpad.net/nova/+spec/vmware-vsan-support">streamOptimzed</a>.</p>

<p><a href="https://jreypo.files.wordpress.com/2015/02/image19.png"><img src="%7B%7B%20site.baseurl%20%7D%7D/assets/image19.png?w=580" alt="IMAGE19" /></a></p>

<p>Select the datastore to be used by Glance image service.</p>

<p><a href="https://jreypo.files.wordpress.com/2015/02/image20.png"><img src="%7B%7B%20site.baseurl%20%7D%7D/assets/image20.png?w=580" alt="IMAGE20" /></a></p>

<p>Configure Neutron networking. For Neutron there are two different
options:</p>

<ul>
  <li>DVS-based networking</li>
  <li>NSX networking</li>
</ul>

<p>For DVS simply select the Virtual Distributed Switch where you created
the port-group for the data network with the VLAN 4095 configured.</p>

<p>For NSX deployment you must enter:</p>

<ul>
  <li>NSX Manager IP address.</li>
  <li>NSX Manager administrative username.</li>
  <li>NSX Manager administrative user password.</li>
  <li>VDN Scope. Basically the Transport Zone in NSX-v to be used as
transport layer for data traffic.</li>
  <li>Edge Cluster. A vSphere cluster to deploy the NSX Edge instances.</li>
  <li>Virtual Distributed Switch for NSX networking.</li>
  <li>External Network. This a port group to be used as external network
by instances in OpenStack via a virtual router. This port group
should be accessible from compute, management and edge clusters.</li>
</ul>

<p><a href="https://jreypo.files.wordpress.com/2015/02/image21.png"><img src="%7B%7B%20site.baseurl%20%7D%7D/assets/image21.png?w=580" alt="IMAGE21" /></a></p>

<p>During the Neutron configuration the wizard will connect to the NSX
Manager with the provided credentials and will ask to accept the SSL
certificate.</p>

<p><a href="https://jreypo.files.wordpress.com/2015/02/image22.png"><img src="%7B%7B%20site.baseurl%20%7D%7D/assets/image22.png?w=580" alt="IMAGE22" /></a></p>

<p>In the next screen the wizard will ask for the OpenStack admin user,
password and project. Also you can select the Keystone type option:</p>

<ul>
  <li>Database</li>
  <li>Active Directory as LDAP Server.</li>
</ul>

<p><a href="https://jreypo.files.wordpress.com/2015/02/image23.png"><img src="%7B%7B%20site.baseurl%20%7D%7D/assets/image23.png?w=580" alt="IMAGE23" /></a></p>

<p>Finally set the syslog server, it is not mandatory to set this value but
it is highly recommended.</p>

<p><a href="https://jreypo.files.wordpress.com/2015/02/image24.png"><img src="%7B%7B%20site.baseurl%20%7D%7D/assets/image24.png?w=580" alt="IMAGE24" /></a></p>

<p>Review the configuration and click <strong>Finish</strong>.</p>

<p><a href="https://jreypo.files.wordpress.com/2015/02/screen-shot-2015-01-31-at-20-43-54.png"><img src="%7B%7B%20site.baseurl%20%7D%7D/assets/screen-shot-2015-01-31-at-20-43-54.png?w=580" alt="Screen Shot 2015-01-31 at
20.43.54" /></a></p>

<p>Review the configuration and click <strong>Finish</strong>.</p>

<p>The deployment will take some time, depending on your storage backend.
In my testing lab took around one hour, but it is a nested environment
running on NFS so you can expect much better times deploying in a real
world setup. When it is finished you can review the different components
of VIO with vSphere Web Client in <em>VMs and Templates</em>, there would be a
new folder structure containing all VIO virtual machines.</p>

<p><a href="https://jreypo.files.wordpress.com/2015/02/image25.png"><img src="%7B%7B%20site.baseurl%20%7D%7D/assets/image25.png" alt="IMAGE25" /></a></p>

<h2 id="validate-your-vio-installation"> Validate your VIO installation</h2>

<p>In your favorite browser open an HTTPS session against the public
hostname or virtual IP address configured during VIO installation. The
Horizon portal login page will display.</p>

<p><a href="https://jreypo.files.wordpress.com/2015/02/screen-shot-2015-02-01-at-22-50-41.png"><img src="%7B%7B%20site.baseurl%20%7D%7D/assets/screen-shot-2015-02-01-at-22-50-41.png?w=580" alt="Screen Shot 2015-02-01 at
22.50.41" /></a></p>

<p>Enter the admin credentials and OpenStack admin Overview page will show
up. The access the <em>Hypervisors</em> area and check that the selected
cluster for Nova appears there.</p>

<p><a href="https://jreypo.files.wordpress.com/2015/02/screen-shot-2015-02-01-at-22-53-19.png"><img src="%7B%7B%20site.baseurl%20%7D%7D/assets/screen-shot-2015-02-01-at-22-53-19.png?w=580" alt="Screen Shot 2015-02-01 at
22.53.19" /></a></p>

<p>At this point VIO is setup and you can start to work in Horizon or using
the CLI as with any other OpenStack distribution.</p>

<p><strong>Have fun and happy stacking!</strong></p>

<p>Juanma.</p>

      <hr />
      <footer role="contentinfo">
        <div class="social-share">
  <h4>Share on</h4>
  <ul>
    <li>
      <a href="https://twitter.com/intent/tweet?text=/openstack/vmware/a-first-look-into-vmware-integrated-openstack-vio/" class="twitter" title="Share on Twitter"><i class="fa fa-twitter"></i><span> Twitter</span></a>
    </li>
    <li>
      <a href="https://www.facebook.com/sharer/sharer.php?u=/openstack/vmware/a-first-look-into-vmware-integrated-openstack-vio/" class="facebook" title="Share on Facebook"><i class="fa fa-facebook"></i><span> Facebook</span></a>
    </li>
    <li>
      <a href="https://plus.google.com/share?url=/openstack/vmware/a-first-look-into-vmware-integrated-openstack-vio/" class="google-plus" title="Share on Google Plus"><i class="fa fa-google-plus"></i><span> Google+</span></a>
    </li>
  </ul>
</div><!-- /.social-share -->
        <p class="byline"><strong>A first look into VMware Integrated #OpenStack (VIO)</strong> was published on <time datetime="2015-02-02T22:12:16+01:00">February 02, 2015</time>.</p>
      </footer>
    </div><!-- /.article-wrap -->
  
  </article>
</div><!-- /#main -->

<div class="footer-wrap">
  
  <div class="related-articles">
  <h4>You might also enjoy <small class="pull-right">(<a href="/posts/">View all posts</a>)</small></h4>
    <ul>
    
      <li><a href="/openstack/vmware/upgrading-vmware-integrated-openstack/" title="Upgrading VMware Integrated OpenStack">Upgrading VMware Integrated OpenStack</a></li>
    
      <li><a href="/cloud/openstack/give-me-openstack-and-give-me-liberty/" title="Give me OpenStack and give me Liberty!">Give me OpenStack and give me Liberty!</a></li>
    
      <li><a href="/linux/red%20hat/sysadmin/dnf-the-new-fedora-package-manager/" title="DNF, the new Fedora package manager">DNF, the new Fedora package manager</a></li>
    
    </ul>
    <hr />
  </div><!-- /.related-articles -->
  
  <footer>
    

<span>&copy; 2015 Juan Manuel Rey. <br> Hosted on <a href="https://pages.github.com" rel="nofollow" target="_blank">GitHub Pages</a> and powered by <a href="http://jekyllrb.com" rel="nofollow">Jekyll</a> using the <a href="http://mademistakes.com/minimal-mistakes/" rel="nofollow">Minimal Mistakes</a> theme.</span>

  </footer>
</div><!-- /.footer-wrap -->

<script src="//ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script>
<script>window.jQuery || document.write('<script src="/assets/js/vendor/jquery-1.9.1.min.js"><\/script>')</script>
<script src="/assets/js/scripts.min.js"></script>




</body>
</html>
