<!doctype html>
<!--[if lt IE 7]><html class="no-js lt-ie9 lt-ie8 lt-ie7" lang="en"> <![endif]-->
<!--[if (IE 7)&!(IEMobile)]><html class="no-js lt-ie9 lt-ie8" lang="en"><![endif]-->
<!--[if (IE 8)&!(IEMobile)]><html class="no-js lt-ie9" lang="en"><![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en"><!--<![endif]-->
<head>
<meta charset="utf-8">
<title>How to configure a remote syslog server for NSX Controller &#8211; Juanma's Blog</title>
<meta name="description" content="As with the rest of NSX for vSphere components any competent admin
would like to configure a remote syslog server for the NSX Controllers,
in my homelab I have vRealize Log Insight and recently I decided to
configure it on my NSX Controllers and document the procedure here
mostly as self-reference.

">
<meta name="keywords" content="API, devops, network virtualization, NSX, NSX Controller, NSX for vSphere, REST, sysadmin, syslog">

  

<!-- Twitter Cards -->
<meta name="twitter:title" content="How to configure a remote syslog server for NSX Controller">
<meta name="twitter:description" content="As with the rest of NSX for vSphere components any competent admin
would like to configure a remote syslog server for the NSX Controllers,
in my homelab I have vRealize Log Insight and recently I decided to
configure it on my NSX Controllers and document the procedure here
mostly as self-reference.

">
<meta name="twitter:site" content="@jreypo">


<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="/images/default-thumb.png">

<!-- Open Graph -->
<meta property="og:locale" content="en_US">
<meta property="og:type" content="article">
<meta property="og:title" content="How to configure a remote syslog server for NSX Controller">
<meta property="og:description" content="As with the rest of NSX for vSphere components any competent admin
would like to configure a remote syslog server for the NSX Controllers,
in my homelab I have vRealize Log Insight and recently I decided to
configure it on my NSX Controllers and document the procedure here
mostly as self-reference.

">
<meta property="og:url" content="/devops/vmware/how-to-configure-a-remote-syslog-server-for-nsx-controller/">
<meta property="og:site_name" content="Juanma's Blog">

<meta property="og:image" content="/images/default-thumb.png">






<link rel="canonical" href="/devops/vmware/how-to-configure-a-remote-syslog-server-for-nsx-controller/">
<link href="/feed.xml" type="application/atom+xml" rel="alternate" title="Juanma's Blog Feed">

<!-- http://t.co/dKP3o1e -->
<meta name="HandheldFriendly" content="True">
<meta name="MobileOptimized" content="320">
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<!-- For all browsers -->
<link rel="stylesheet" href="/assets/css/main.css">

<meta http-equiv="cleartype" content="on">

<!-- HTML5 Shiv and Media Query Support -->
<!--[if lt IE 9]>
	<script src="/assets/js/vendor/html5shiv.min.js"></script>
	<script src="/assets/js/vendor/respond.min.js"></script>
<![endif]-->

<!-- Modernizr -->
<script src="/assets/js/vendor/modernizr-2.7.1.custom.min.js"></script>

<link href='//fonts.googleapis.com/css?family=PT+Sans+Narrow:400,700%7CPT+Serif:400,700,400italic' rel='stylesheet' type='text/css'>

<!-- Icons -->
<!-- 16x16 -->
<link rel="shortcut icon" href="/favicon.ico">
<!-- 32x32 -->
<link rel="shortcut icon" href="/favicon.png">
<!-- 57x57 (precomposed) for iPhone 3GS, pre-2011 iPod Touch and older Android devices -->
<link rel="apple-touch-icon-precomposed" href="/images/apple-touch-icon-precomposed.png">
<!-- 72x72 (precomposed) for 1st generation iPad, iPad 2 and iPad mini -->
<link rel="apple-touch-icon-precomposed" sizes="72x72" href="/images/apple-touch-icon-72x72-precomposed.png">
<!-- 114x114 (precomposed) for iPhone 4, 4S, 5 and post-2011 iPod Touch -->
<link rel="apple-touch-icon-precomposed" sizes="114x114" href="/images/apple-touch-icon-114x114-precomposed.png">
<!-- 144x144 (precomposed) for iPad 3rd and 4th generation -->
<link rel="apple-touch-icon-precomposed" sizes="144x144" href="/images/apple-touch-icon-144x144-precomposed.png">

</head>

<body class="post">

<!--[if lt IE 9]><div class="browser-upgrade alert alert-info">You are using an <strong>outdated</strong> browser. Please <a href="http://browsehappy.com/">upgrade your browser</a> to improve your experience.</div><![endif]-->

<div class="navigation-wrapper">
	<div class="site-name">
		<a href="/">Juanma's Blog</a>
	</div><!-- /.site-name -->
	<div class="top-navigation">
		<nav role="navigation" id="site-nav" class="nav">
		    <ul>
		        
				    
				        
				    
				    <li><a href="/about/" >About</a></li>
				
				    
				        
				    
				    <li><a href="/posts/" >Posts</a></li>
				
				    
				        
				    
				    <li><a href="/vmware-hp-links/" >HP Resources for VMware</a></li>
				
				    
				        
				    
				    <li><a href="/tags/" >Tags</a></li>
				
		    </ul>
		</nav>
	</div><!-- /.top-navigation -->
</div><!-- /.navigation-wrapper -->



<div id="main" role="main">
  <div class="article-author-side">
    
  

<div itemscope itemtype="http://schema.org/Person">


	<img src="/images/" class="bio-photo" alt=" bio photo">


  <h3 itemprop="name"></h3>
  <p></p>
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
</div>

  </div>
  <article class="post">
    <div class="headline-wrap">
      
        <h1><a href="/devops/vmware/how-to-configure-a-remote-syslog-server-for-nsx-controller/" rel="bookmark" title="How to configure a remote syslog server for NSX Controller">How to configure a remote syslog server for NSX Controller</a></h1>
      
    </div><!--/ .headline-wrap -->
    <div class="article-wrap">
      <p>As with the rest of <strong>NSX for vSphere</strong> components any competent admin
would like to configure a remote syslog server for the NSX Controllers,
in my homelab I have vRealize Log Insight and recently I decided to
configure it on my NSX Controllers and document the procedure here
mostly as self-reference.</p>

<p>NSX Manager has the option to configure a remote syslog server using its
management web site, but where is the option for the Controllers? Well,
if you lurk around NSX interface in vSphere Web Client will quickly
notice that the option is somehow missing.  Actually the only option to
enable it is using NSX REST API. Let’s see how to do it.</p>

<p>For this post I will use Firefox REST Client Add-on but you can use your
favorite REST client. Firstly any REST API call will require at least
the Authentication header, in Firefox REST Client click on
<em>Authentication</em> drop-down menu, select <em>Basic Authentication</em> and enter
the admin credentials.</p>

<p><a href="https://jreypo.files.wordpress.com/2015/09/screen-shot-2015-09-30-at-02-25-19.png"><img src="%7B%7B%20site.baseurl%20%7D%7D/assets/screen-shot-2015-09-30-at-02-25-19.png?w=300" alt="Screen Shot 2015-09-30 at
02.25.19" /></a></p>

<p>Additionally PUT and POST methods will require you to set a custom
header with the following values that will define the content of the
HTTP Request body. Use these values.</p>

<ul>
  <li>Name: Content-Type</li>
  <li>Value: application/xml</li>
</ul>

<p>With these two headers set enter the API URL, in my case it is:</p>

<p><strong>https://nsxm-01.mcorp.local/api/2.0/vdn/controller/controller-1/syslog</strong></p>

<p>To construct this URL you will need the controller ID that can be get
in the NSX interface in vSphere Web Client as shown below.</p>

<p><a href="https://jreypo.files.wordpress.com/2015/09/screen-shot-2015-09-30-at-02-50-38.png"><img src="%7B%7B%20site.baseurl%20%7D%7D/assets/screen-shot-2015-09-30-at-02-50-38.png?w=580" alt="Screen Shot 2015-09-30 at
02.50.38" /></a></p>

<p>Select POST as the method. You will need to enter the body for the HTTP
Request, in XML format. Use the below code as an example to build the
content for the HTTP Request body.</p>

<p>https://gist.github.com/jreypo/8840b4e887095e5a460d</p>

<p>This XML code will indicate the NSX Manager to set the IP address in the
<code>syslogServer</code> node as the remote syslog server for the controller in
the URL. The protocol, port and log level are also defined.</p>

<p><a href="https://jreypo.files.wordpress.com/2015/09/screen-shot-2015-09-17-at-01-14-19.png"><img src="%7B%7B%20site.baseurl%20%7D%7D/assets/screen-shot-2015-09-17-at-01-14-19.png?w=580" alt="Screen Shot 2015-09-17 at
01.14.19" /></a></p>

<p>Submit the request and if everything is configured as described you will
receive a <code>200 OK</code> status code.</p>

<p><a href="https://jreypo.files.wordpress.com/2015/09/screen-shot-2015-09-17-at-01-15-06.png"><img src="%7B%7B%20site.baseurl%20%7D%7D/assets/screen-shot-2015-09-17-at-01-15-06.png?w=580" alt="Screen Shot 2015-09-17 at
01.15.06" /></a></p>

<p>At this point the syslog server is configured for all NSX Controllers,
you can check the status using also an API call with the same URL and
selecting GET method.</p>

<p>Comments are welcome.</p>

<p>Juanma.</p>

      <hr />
      <footer role="contentinfo">
        <div class="social-share">
  <h4>Share on</h4>
  <ul>
    <li>
      <a href="https://twitter.com/intent/tweet?text=/devops/vmware/how-to-configure-a-remote-syslog-server-for-nsx-controller/" class="twitter" title="Share on Twitter"><i class="fa fa-twitter"></i><span> Twitter</span></a>
    </li>
    <li>
      <a href="https://www.facebook.com/sharer/sharer.php?u=/devops/vmware/how-to-configure-a-remote-syslog-server-for-nsx-controller/" class="facebook" title="Share on Facebook"><i class="fa fa-facebook"></i><span> Facebook</span></a>
    </li>
    <li>
      <a href="https://plus.google.com/share?url=/devops/vmware/how-to-configure-a-remote-syslog-server-for-nsx-controller/" class="google-plus" title="Share on Google Plus"><i class="fa fa-google-plus"></i><span> Google+</span></a>
    </li>
  </ul>
</div><!-- /.social-share -->
        <p class="byline"><strong>How to configure a remote syslog server for NSX Controller</strong> was published on <time datetime="2015-09-30T02:00:22+02:00">September 30, 2015</time>.</p>
      </footer>
    </div><!-- /.article-wrap -->
  
  </article>
</div><!-- /#main -->

<div class="footer-wrap">
  
  <div class="related-articles">
  <h4>You might also enjoy <small class="pull-right">(<a href="/posts/">View all posts</a>)</small></h4>
    <ul>
    
      <li><a href="/openstack/vmware/upgrading-vmware-integrated-openstack/" title="Upgrading VMware Integrated OpenStack">Upgrading VMware Integrated OpenStack</a></li>
    
      <li><a href="/cloud/openstack/give-me-openstack-and-give-me-liberty/" title="Give me OpenStack and give me Liberty!">Give me OpenStack and give me Liberty!</a></li>
    
      <li><a href="/linux/red%20hat/sysadmin/dnf-the-new-fedora-package-manager/" title="DNF, the new Fedora package manager">DNF, the new Fedora package manager</a></li>
    
    </ul>
    <hr />
  </div><!-- /.related-articles -->
  
  <footer>
    

<span>&copy; 2015 Juan Manuel Rey. <br> Hosted on <a href="https://pages.github.com" rel="nofollow" target="_blank">GitHub Pages</a> and powered by <a href="http://jekyllrb.com" rel="nofollow">Jekyll</a> using the <a href="http://mademistakes.com/minimal-mistakes/" rel="nofollow">Minimal Mistakes</a> theme.</span>

  </footer>
</div><!-- /.footer-wrap -->

<script src="//ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script>
<script>window.jQuery || document.write('<script src="/assets/js/vendor/jquery-1.9.1.min.js"><\/script>')</script>
<script src="/assets/js/scripts.min.js"></script>




</body>
</html>
