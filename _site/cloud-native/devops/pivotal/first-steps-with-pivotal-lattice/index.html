<!doctype html>
<!--[if lt IE 7]><html class="no-js lt-ie9 lt-ie8 lt-ie7" lang="en"> <![endif]-->
<!--[if (IE 7)&!(IEMobile)]><html class="no-js lt-ie9 lt-ie8" lang="en"><![endif]-->
<!--[if (IE 8)&!(IEMobile)]><html class="no-js lt-ie9" lang="en"><![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en"><!--<![endif]-->
<head>
<meta charset="utf-8">
<title>First steps with Pivotal Lattice &#8211; Juanma's Blog</title>
<meta name="description" content="Lattice is the latest addition from
Pivotal to its portfolio of open source
projects. Lattice leverages various components from Cloud
Foundry, in order to run containerized
workloads in a cluster.

">
<meta name="keywords" content="Cloud, Cloud Foundry, cloud-native, containers, devops, Docker, Lattice, lattice.cf, ltc, Pivotal, vagrant">

  

<!-- Twitter Cards -->
<meta name="twitter:title" content="First steps with Pivotal Lattice">
<meta name="twitter:description" content="Lattice is the latest addition from
Pivotal to its portfolio of open source
projects. Lattice leverages various components from Cloud
Foundry, in order to run containerized
workloads in a cluster.

">
<meta name="twitter:site" content="@jreypo">


<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="/images/default-thumb.png">

<!-- Open Graph -->
<meta property="og:locale" content="en_US">
<meta property="og:type" content="article">
<meta property="og:title" content="First steps with Pivotal Lattice">
<meta property="og:description" content="Lattice is the latest addition from
Pivotal to its portfolio of open source
projects. Lattice leverages various components from Cloud
Foundry, in order to run containerized
workloads in a cluster.

">
<meta property="og:url" content="/cloud-native/devops/pivotal/first-steps-with-pivotal-lattice/">
<meta property="og:site_name" content="Juanma's Blog">

<meta property="og:image" content="/images/default-thumb.png">






<link rel="canonical" href="/cloud-native/devops/pivotal/first-steps-with-pivotal-lattice/">
<link href="/feed.xml" type="application/atom+xml" rel="alternate" title="Juanma's Blog Feed">

<!-- http://t.co/dKP3o1e -->
<meta name="HandheldFriendly" content="True">
<meta name="MobileOptimized" content="320">
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<!-- For all browsers -->
<link rel="stylesheet" href="/assets/css/main.css">

<meta http-equiv="cleartype" content="on">

<!-- HTML5 Shiv and Media Query Support -->
<!--[if lt IE 9]>
	<script src="/assets/js/vendor/html5shiv.min.js"></script>
	<script src="/assets/js/vendor/respond.min.js"></script>
<![endif]-->

<!-- Modernizr -->
<script src="/assets/js/vendor/modernizr-2.7.1.custom.min.js"></script>

<link href='//fonts.googleapis.com/css?family=PT+Sans+Narrow:400,700%7CPT+Serif:400,700,400italic' rel='stylesheet' type='text/css'>

<!-- Icons -->
<!-- 16x16 -->
<link rel="shortcut icon" href="/favicon.ico">
<!-- 32x32 -->
<link rel="shortcut icon" href="/favicon.png">
<!-- 57x57 (precomposed) for iPhone 3GS, pre-2011 iPod Touch and older Android devices -->
<link rel="apple-touch-icon-precomposed" href="/images/apple-touch-icon-precomposed.png">
<!-- 72x72 (precomposed) for 1st generation iPad, iPad 2 and iPad mini -->
<link rel="apple-touch-icon-precomposed" sizes="72x72" href="/images/apple-touch-icon-72x72-precomposed.png">
<!-- 114x114 (precomposed) for iPhone 4, 4S, 5 and post-2011 iPod Touch -->
<link rel="apple-touch-icon-precomposed" sizes="114x114" href="/images/apple-touch-icon-114x114-precomposed.png">
<!-- 144x144 (precomposed) for iPad 3rd and 4th generation -->
<link rel="apple-touch-icon-precomposed" sizes="144x144" href="/images/apple-touch-icon-144x144-precomposed.png">

</head>

<body class="post">

<!--[if lt IE 9]><div class="browser-upgrade alert alert-info">You are using an <strong>outdated</strong> browser. Please <a href="http://browsehappy.com/">upgrade your browser</a> to improve your experience.</div><![endif]-->

<div class="navigation-wrapper">
	<div class="site-name">
		<a href="/">Juanma's Blog</a>
	</div><!-- /.site-name -->
	<div class="top-navigation">
		<nav role="navigation" id="site-nav" class="nav">
		    <ul>
		        
				    
				        
				    
				    <li><a href="/about/" >About</a></li>
				
				    
				        
				    
				    <li><a href="/posts/" >Posts</a></li>
				
				    
				        
				    
				    <li><a href="/vmware-hp-links/" >HP Resources for VMware</a></li>
				
				    
				        
				    
				    <li><a href="/tags/" >Tags</a></li>
				
		    </ul>
		</nav>
	</div><!-- /.top-navigation -->
</div><!-- /.navigation-wrapper -->



<div id="main" role="main">
  <div class="article-author-side">
    
  

<div itemscope itemtype="http://schema.org/Person">


	<img src="/images/" class="bio-photo" alt=" bio photo">


  <h3 itemprop="name"></h3>
  <p></p>
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
</div>

  </div>
  <article class="post">
    <div class="headline-wrap">
      
        <h1><a href="/cloud-native/devops/pivotal/first-steps-with-pivotal-lattice/" rel="bookmark" title="First steps with Pivotal Lattice">First steps with Pivotal Lattice</a></h1>
      
    </div><!--/ .headline-wrap -->
    <div class="article-wrap">
      <p><strong><a href="http://lattice.cf/">Lattice</a></strong> is the latest addition from
<strong><a href="http://pivotal.io/">Pivotal</a></strong> to its portfolio of open source
projects. Lattice leverages various components from <strong><a href="http://pivotal.io/platform">Cloud
Foundry</a></strong>, in order to run containerized
workloads in a cluster.</p>

<ul>
  <li><strong>Diego</strong> - The new Cloud Foundry elastic runtime. Acts as an
action-based scheduler and provides support for Docker images.</li>
  <li><strong>Doppler</strong> - The log and metric aggregator for the platform and the
running workloads.</li>
  <li><strong>Gorouter</strong> - A software-based router with reverse
proxy capabilities. Dynamically updated as the containers are spun
up and down.</li>
</ul>

<p>The first fact we need to understand about Lattice is that it is not
intended to run production workloads. Instead Lattice is meant to be run
on <a href="https://www.virtualbox.org/">Virtualbox</a> or VMware Fusion using
<a href="https://www.vagrantup.com/">Vagrant</a>. In the end Lattice is an easy
way to leverage all the power of Cloud Foundry for running containers,
in your laptop and without having to bother about all Cloud Foundry
installation details.</p>

<h3 id="deploying-lattice">Deploying Lattice</h3>

<p>Installing and running Lattice in your laptop is relatively easy
process, first of all we will need  First download the latest package
from <a href="https://github.com/cloudfoundry-incubator/lattice/releases">GitHub
Releases</a>
page for Lattice, there are packages available for Linux and OS X.</p>

<p>Unzip the package in a directory with the rest of your virtual machines.</p>

<pre><code>unzip lattice-bundle-v0.4.3-osx.zip
</code></pre>

<p>Now copy the <code>ltc</code> utility to a directory in your PATH, I always use
<code>/usr/local/bin</code> for this kind of binaries.</p>

<h3 id="running-lattice">Running Lattice</h3>

<p>Running Lattice should be quite simple, just change to <code>vagrant</code>
directory on Lattice installation path, then execute <code>vagrant up</code>
command and that’s it. However there is a caveat, by default the
Vagranfile will use the IP address 192.168.11.11 if <code>LATTICE_SYSTEM_IP</code>
variable is not provided during the execution.</p>

<p>To avoid this issue pass <code>LATTICE_SYSTEM_IP</code> variable to Vagrant during
the execution. I personally have used both <a href="http://www.vmware.com/products/fusion">VMware
Fusion</a> and <a href="https://communities.vmware.com/community/vmtn/devops/vmware-appcatalyst">VMware
AppCatalyst</a>
but you can use Virtualbox too. For the AppCatalyst the only requirement
is to have <code>appcatalyst-daemon</code> running since it is needed by the
Vagrant provider.</p>

<pre><code>LATTICE_SYSTEM_IP=192.168.161.11 vagrant up --provider vmware_fusion
</code></pre>

<p>With this we will have our Lattice instance up and running. Next we need
to tell <code>ltc</code> how to connect to our Lattice instance, this operation is
called targeting.</p>

<pre><code>ltc target 192.168.161.11.xip.io
</code></pre>

<p>With the API endpoint set let’s deploy our first application, for this
example we will use Lattice example app. Run the <code>ltc create</code> command
with the name of the new app and the container to be spun up as the
arguments.</p>

<p><a href="https://jreypo.files.wordpress.com/2015/10/screen-shot-2015-10-02-at-13-33-37.png"><img src="%7B%7B%20site.baseurl%20%7D%7D/assets/screen-shot-2015-10-02-at-13-33-37.png?w=580" alt="Screen Shot 2015-10-02 at
13.33.37" /></a></p>

<p>Open your favorite browser and access
https://my-app.192.168.161.11.xip.io.</p>

<p><a href="https://jreypo.files.wordpress.com/2015/10/screen-shot-2015-10-02-at-13-44-24.png"><img src="%7B%7B%20site.baseurl%20%7D%7D/assets/screen-shot-2015-10-02-at-13-44-24.png?w=580" alt="Screen Shot 2015-10-02 at
13.44.24" /></a></p>

<p>The index indicates the node that we are accessing. Next we will scale
up the application adding two additional containers. Use <code>ltc scale</code> to
add additional instances of the app and <code>ltc status</code> to retrieve the
status.</p>

<p><a href="https://jreypo.files.wordpress.com/2015/10/screen-shot-2015-10-02-at-14-22-40.png"><img src="%7B%7B%20site.baseurl%20%7D%7D/assets/screen-shot-2015-10-02-at-14-22-40.png?w=580" alt="Screen Shot 2015-10-02 at
14.22.40" /></a></p>

<p>Another useful operation with <code>ltc</code> is the capacity to get the logs for
your app.</p>

<pre><code> 2015-10-02 14:23:18 ☆ trantor in ~
○ → ltc logs my-app
10/02 14:30:11.10 [APP|2] Lattice-app. Says Hello. on index: 2
10/02 14:30:11.28 [APP|0] Lattice-app. Says Hello. on index: 0
10/02 14:30:11.60 [APP|1] Lattice-app. Says Hello. on index: 1
10/02 14:30:12.10 [APP|2] Lattice-app. Says Hello. on index: 2
10/02 14:30:12.28 [APP|0] Lattice-app. Says Hello. on index: 0
10/02 14:30:12.60 [APP|1] Lattice-app. Says Hello. on index: 1
</code></pre>

<p>I’ll let you to add more apps to Lattice and to play around with <code>ltc</code>.</p>

<p>Comments are welcome, as always.</p>

<p>Juanma.</p>

      <hr />
      <footer role="contentinfo">
        <div class="social-share">
  <h4>Share on</h4>
  <ul>
    <li>
      <a href="https://twitter.com/intent/tweet?text=/cloud-native/devops/pivotal/first-steps-with-pivotal-lattice/" class="twitter" title="Share on Twitter"><i class="fa fa-twitter"></i><span> Twitter</span></a>
    </li>
    <li>
      <a href="https://www.facebook.com/sharer/sharer.php?u=/cloud-native/devops/pivotal/first-steps-with-pivotal-lattice/" class="facebook" title="Share on Facebook"><i class="fa fa-facebook"></i><span> Facebook</span></a>
    </li>
    <li>
      <a href="https://plus.google.com/share?url=/cloud-native/devops/pivotal/first-steps-with-pivotal-lattice/" class="google-plus" title="Share on Google Plus"><i class="fa fa-google-plus"></i><span> Google+</span></a>
    </li>
  </ul>
</div><!-- /.social-share -->
        <p class="byline"><strong>First steps with Pivotal Lattice</strong> was published on <time datetime="2015-10-02T13:40:08+02:00">October 02, 2015</time>.</p>
      </footer>
    </div><!-- /.article-wrap -->
  
  </article>
</div><!-- /#main -->

<div class="footer-wrap">
  
  <div class="related-articles">
  <h4>You might also enjoy <small class="pull-right">(<a href="/posts/">View all posts</a>)</small></h4>
    <ul>
    
      <li><a href="/openstack/vmware/upgrading-vmware-integrated-openstack/" title="Upgrading VMware Integrated OpenStack">Upgrading VMware Integrated OpenStack</a></li>
    
      <li><a href="/cloud/openstack/give-me-openstack-and-give-me-liberty/" title="Give me OpenStack and give me Liberty!">Give me OpenStack and give me Liberty!</a></li>
    
      <li><a href="/linux/red%20hat/sysadmin/dnf-the-new-fedora-package-manager/" title="DNF, the new Fedora package manager">DNF, the new Fedora package manager</a></li>
    
    </ul>
    <hr />
  </div><!-- /.related-articles -->
  
  <footer>
    

<span>&copy; 2015 Juan Manuel Rey. <br> Hosted on <a href="https://pages.github.com" rel="nofollow" target="_blank">GitHub Pages</a> and powered by <a href="http://jekyllrb.com" rel="nofollow">Jekyll</a> using the <a href="http://mademistakes.com/minimal-mistakes/" rel="nofollow">Minimal Mistakes</a> theme.</span>

  </footer>
</div><!-- /.footer-wrap -->

<script src="//ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script>
<script>window.jQuery || document.write('<script src="/assets/js/vendor/jquery-1.9.1.min.js"><\/script>')</script>
<script src="/assets/js/scripts.min.js"></script>




</body>
</html>
